{"ast":null,"code":"import _defineProperty from\"/home/teepakorn_oat/dbms-fb/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/teepakorn_oat/dbms-fb/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/teepakorn_oat/dbms-fb/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/teepakorn_oat/dbms-fb/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/teepakorn_oat/dbms-fb/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/teepakorn_oat/dbms-fb/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import Modal from'react-awesome-modal';import'./Showdata.css';//import '../../server/app';\nimport{ip,port}from\"../setIP/setting\";var Showdata=/*#__PURE__*/function(_Component){_inherits(Showdata,_Component);var _super=_createSuper(Showdata);function Showdata(){var _this;_classCallCheck(this,Showdata);_this=_super.call(this);_this.getData=function(){console.log(\"before fetch data\");fetch('/data').then(function(res){return res.json();}).then(function(list){return _this.setState({list:list});});console.log(\"after fetch data\");};_this.onDelete=function(user){var url=\"/delete\";var data={idkey:user.id};axios.put(url,data);setTimeout(function(){_this.componentDidMount();},1);};_this.call=function(user){_this.openModal();_this.setState({idkey:user.id,firstname:user.firstname,lastname:user.lastname});};_this.handleChang=function(e){_this.setState(_defineProperty({},e.target.id,e.target.value));var url=\"/data\";var data={idkey:_this.state.idkey,firstname:_this.state.firstname,lastname:_this.state.lastname};axios.put(url,data);};_this.state={list:[],idkey:\"\",firstname:\"\",lastname:\"\"};_this.handleChang=_this.handleChang.bind(_assertThisInitialized(_this));_this.handleClicked=_this.handleClicked.bind(_assertThisInitialized(_this));//console.log(\"hello show data\");\nreturn _this;}_createClass(Showdata,[{key:\"componentDidMount\",value:function componentDidMount(){//console.log(\"before get data\");\nthis.getData();//console.log(\"after get data\");\n}},{key:\"openModal\",value:function openModal(){this.setState({visible:true});}},{key:\"closeModal\",value:function closeModal(){this.setState({visible:false});}},{key:\"handleClicked\",value:function handleClicked(){var _this2=this;var url=\"/data\";var data={idkey:this.state.idkey,firstname:this.state.firstname,lastname:this.state.lastname};axios.put(url,data);this.setState({idkey:\"\",firstname:\"\",lastname:\"\"});this.closeModal();setTimeout(function(){_this2.componentDidMount();},1);}},{key:\"render\",value:function render(){var _this3=this;var list=this.state.list;return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"my-4\"},\"Users Information\",/*#__PURE__*/React.createElement(\"br\",null)),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"container p-3 my-3 bg-dark text-white\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table table-dark\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"ID\"),/*#__PURE__*/React.createElement(\"th\",null,\"First Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Last Name\"))),/*#__PURE__*/React.createElement(\"tbody\",null,list.map(function(user){return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,user.id),/*#__PURE__*/React.createElement(\"td\",null,user.firstname),/*#__PURE__*/React.createElement(\"td\",null,user.lastname),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",class:\"btn btn-warning\",onClick:function onClick(){return _this3.call(user);}},\"Edit\")),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",class:\"btn btn-danger\",onClick:function onClick(){return _this3.onDelete(user);}},\"Delete\")),/*#__PURE__*/React.createElement(\"div\",{className:\"box\"},/*#__PURE__*/React.createElement(Modal,{visible:_this3.state.visible,width:\"1200\",height:\"600\",effect:\"fadeInUp\",onClickAway:function onClickAway(){return _this3.closeModal();}},/*#__PURE__*/React.createElement(\"form\",{className:\"container\",id:\"form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"h3\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"id\"},\"ID: \",_this3.state.idkey,/*#__PURE__*/React.createElement(\"br\",null)))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"firstname:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",id:\"firstname\",onChange:_this3.handleChang,value:_this3.state.firstname})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"lasttname:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",id:\"lastname\",onChange:_this3.handleChang,value:_this3.state.lastname})),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:_this3.handleClicked},\"Submit\")))));})))),/*#__PURE__*/React.createElement(\"br\",null));}}]);return Showdata;}(Component);export{Showdata as default};","map":{"version":3,"sources":["/home/teepakorn_oat/dbms-fb/react/src/showdata/Showdata.js"],"names":["React","Component","axios","Modal","ip","port","Showdata","getData","console","log","fetch","then","res","json","list","setState","onDelete","user","url","data","idkey","id","put","setTimeout","componentDidMount","call","openModal","firstname","lastname","handleChang","e","target","value","state","bind","handleClicked","visible","closeModal","map"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport axios from \"axios\";\nimport Modal from 'react-awesome-modal';\nimport './Showdata.css';\n//import '../../server/app';\nimport {ip,port} from \"../setIP/setting\";\n\nexport default class Showdata extends Component{\n    constructor() {\n        super();\n        this.state ={\n            list:[],\n            idkey:\"\",\n            firstname:\"\",\n            lastname:\"\"\n        }\n        this.handleChang = this.handleChang.bind(this);\n        this.handleClicked = this.handleClicked.bind(this);\n        //console.log(\"hello show data\");\n    }\n    componentDidMount() {\n        //console.log(\"before get data\");\n        this.getData();\n        //console.log(\"after get data\");\n    }\n    getData = () => {\n        console.log(\"before fetch data\");\n        fetch('/data')\n            .then(res => res.json())\n            .then(list => this.setState({ list }))\n        console.log(\"after fetch data\");\n    }\n\n    onDelete=(user)=>{\n        let url = `/delete`;\n        let data = {\n            idkey:user.id\n        }\n        axios.put(url,data)\n        setTimeout(()=>{this.componentDidMount()},1)\n    }\n\n    openModal() {\n        this.setState({\n            visible : true\n        });\n\n    }\n    closeModal() {\n        this.setState({\n            visible : false\n        });\n    }\n    call=(user)=>{\n        this.openModal();\n        this.setState({\n            idkey:user.id,\n            firstname:user.firstname,\n            lastname:user.lastname\n        })\n    }\n    handleChang = (e) => {\n        this.setState({\n            [e.target.id]: e.target.value\n        });\n        let url = `/data`;\n        let data = {\n            idkey:this.state.idkey,\n            firstname:this.state.firstname,\n            lastname:this.state.lastname\n        }\n        axios.put(url,data)\n    }\n\n    handleClicked(){\n        let url = `/data`;\n        let data = {\n            idkey:this.state.idkey,\n            firstname:this.state.firstname,\n            lastname:this.state.lastname\n        }\n        axios.put(url,data)\n        this.setState({\n            idkey:\"\",\n            firstname:\"\",\n            lastname:\"\"\n        });\n\tthis.closeModal();\n        setTimeout(()=>{this.componentDidMount()},1)\n    }\n    render() {\n        let {list} = this.state;\n\n        return (\n            <div className=\"App\">\n                <h2 className=\"my-4\">Users Information<br/></h2>\n                <hr/>\n                <div className=\"container p-3 my-3 bg-dark text-white\">\n                    <table className=\"table table-dark\">\n                        <thead>\n                            <tr>\n                            <th>ID</th>\n                            <th>First Name</th>\n                            <th>Last Name</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                                {list.map((user) =>{\n                                    return(\n                                        <tr>\n                                            <td>{user.id}</td>\n                                            <td>{user.firstname}</td>\n                                            <td>{user.lastname}</td>\n                                            <td><button type=\"button\" class=\"btn btn-warning\" onClick={()=>this.call(user)}>Edit</button></td>\n                                            <td><button type=\"button\" class=\"btn btn-danger\"  onClick={()=>this.onDelete(user)}>Delete</button></td>\n                                            <div className=\"box\">\n                                                <Modal visible={this.state.visible}\n                                                       width=\"1200\"\n                                                       height=\"600\"\n                                                       effect=\"fadeInUp\"\n                                                       onClickAway={() => this.closeModal()}\n                                                >\n                                                    <form className=\"container\" id='form'>\n                                                        <div className=\"form-group\">\n                                                            <h3><label htmlFor=\"id\">ID: {this.state.idkey}<br/></label></h3>\n                                                        </div>\n                                                        <div className=\"form-group\">\n                                                            <label>firstname:</label>\n                                                            <input type=\"text\" className=\"form-control\" id=\"firstname\" onChange={this.handleChang} value={this.state.firstname}/>\n                                                        </div>\n                                                        <div className=\"form-group\">\n                                                            <label>lasttname:</label>\n                                                            <input type=\"text\" className=\"form-control\" id=\"lastname\" onChange={this.handleChang} value={this.state.lastname}/>\n                                                        </div>\n                                                        <button type=\"button\" className=\"btn btn-primary\" onClick={this.handleClicked}>Submit</button>\n                                                    </form>\n                                                </Modal>\n                                            </div>\n                                        </tr>\n                                    )})}\n                        </tbody>\n                    </table>\n                </div><br/>\n            </div>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}