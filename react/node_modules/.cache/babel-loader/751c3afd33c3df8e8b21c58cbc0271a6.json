{"ast":null,"code":"import _defineProperty from\"/home/oat/dbms-fbedit/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/oat/dbms-fbedit/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/oat/dbms-fbedit/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/oat/dbms-fbedit/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/oat/dbms-fbedit/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/oat/dbms-fbedit/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import Modal from'react-awesome-modal';import'./Showdata.css';//import '../../server/app';\nimport{ip,port}from\"../setIP/setting\";var Showdata=/*#__PURE__*/function(_Component){_inherits(Showdata,_Component);var _super=_createSuper(Showdata);function Showdata(){var _this;_classCallCheck(this,Showdata);_this=_super.call(this);_this._baseURL='';_this.getData=function(){console.log(\"before fetch data\");fetch('/data').then(function(res){return res.json();}).then(function(list){console.log(list);_this.setState({list:list});});console.log(\"after fetch data\");};_this.onDelete=function(user){var result=window.confirm(\"\\u0E08\\u0E30\\u0E25\\u0E1A\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25 \".concat(user.firstname,\" \").concat(user.lastname,\" \\u0E43\\u0E0A\\u0E48\\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E44\\u0E21\\u0E48?\"));if(result){var url=\"\".concat(_this._baseURL,\"/delete\");var data={id:user.id};axios.put(url,data);_this.componentDidMount();}};_this.call=function(user){_this.openModal(user);_this.setState({id:user.id,firstname:user.firstname,lastname:user.lastname,phonenum:user.phonenum,regisTime:user.regisTime,Regisby:user.Regisby,province:user.province,district:user.district,subdistrict:user.subdistrict,village:user.village});};_this.handleChang=function(e){_this.setState(_defineProperty({},e.target.id,e.target.value));switch(e.target.id){case'province':_this.getDistricts(e.target.value);_this.state.list_subdistrict=[];_this.state.list_village=[];document.getElementById('district').disabled=e.target.value===\"0\"?true:false;document.getElementById('subdistrict').disabled=true;document.getElementById('village').disabled=true;break;case'district':_this.getSubDistricts(e.target.value);_this.state.list_village=[];document.getElementById('subdistrict').disabled=e.target.value===\"0\"?true:false;document.getElementById('village').disabled=true;break;case'subdistrict':_this.getVillage(e.target.value);document.getElementById('village').disabled=e.target.value===\"0\"?true:false;break;}// let url = `https://localhost:3000/data`;\n// let data = {\n//     user_id: this.state.user_id,\n//     user_firstname: this.state.user_firstname,\n//     user_lastname: this.state.user_lastname,\n//     user_email: this.state.user_email,\n//     user_phone: this.state.user_phone\n// }\n// axios.put(url,data)\n};_this.getDateTimeFormatted=function(data){var date=new Date(data);var resultDate=date.toLocaleDateString('th-TH',{year:'numeric',month:'long',day:'numeric'});var resultTime=date.toLocaleTimeString('th-TH',{hour:'2-digit',minute:'2-digit'});return\"\".concat(resultDate,\" \").concat(resultTime);};_this.state={list:[],list_province:[],list_district:[],list_subdistrict:[],list_village:[],id:0,firstname:\"\",lastname:\"\",Regisby:\"\",phonenum:\"\",date_on:\"\",province:\"\",district:\"\",subdistrict:\"\",village:\"\"};_this.handleChang=_this.handleChang.bind(_assertThisInitialized(_this));_this.handleClicked=_this.handleClicked.bind(_assertThisInitialized(_this));//console.log(\"hello show data\");\nreturn _this;}_createClass(Showdata,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;setTimeout(function(){_this2.getData();},1);}},{key:\"getProvinces\",value:function getProvinces(){var _this3=this;axios.get('/provinces').then(function(res){_this3.setState(function(){return{list_province:res.data};});});}},{key:\"getDistricts\",value:function getDistricts(value){var _this4=this;axios.get(\"/districts?provinceId=\".concat(value)).then(function(res){_this4.setState(function(){return{list_district:res.data};});});}},{key:\"getSubDistricts\",value:function getSubDistricts(value){var _this5=this;axios.get(\"/subdistricts?districtId=\".concat(value)).then(function(res){_this5.setState(function(){return{list_subdistrict:res.data};});});}},{key:\"getVillage\",value:function getVillage(value){var _this6=this;axios.get(\"/villages?subdistrictId=\".concat(value)).then(function(res){_this6.setState(function(){return{list_village:res.data};});});}},{key:\"openModal\",value:function openModal(user){this.getProvinces();this.getDistricts(user.provinceId);this.getSubDistricts(user.districtId);this.getVillage(user.subdistrictId);this.setState({visible:true});}},{key:\"closeModal\",value:function closeModal(){this.setState({visible:false});}},{key:\"handleClicked\",value:function handleClicked(){var _this7=this;var url=\"\".concat(this._baseURL,\"/data\");var data={id:this.state.id,firstname:this.state.firstname,lastname:this.state.lastname,phonenum:this.state.phonenum,province:this.state.province,district:this.state.district,subdistrict:this.state.subdistrict,village:this.state.village};axios.put(url,data);this.setState({id:0,firstname:\"\",lastname:\"\",phonenum:\"\",regisTime:\"\",province:\"\",district:\"\",subdistrict:\"\",village:\"\"});this.closeModal();setTimeout(function(){_this7.componentDidMount();},1);}},{key:\"render\",value:function render(){var _this8=this;var list=this.state.list;return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"my-4\"},\"Users Information \",/*#__PURE__*/React.createElement(\"div\",null,\"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14 \",this.state.list.length,\" \\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\")),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"container p-3 my-3 bg-light text-black\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table table-light\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"ID\"),/*#__PURE__*/React.createElement(\"th\",null,\"Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Detail\"),/*#__PURE__*/React.createElement(\"th\",null,\"Create By\"),/*#__PURE__*/React.createElement(\"th\",null,\"Update on\"),/*#__PURE__*/React.createElement(\"th\",null,\"Manage Menu\"))),/*#__PURE__*/React.createElement(\"tbody\",null,list.map(function(user){return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,user.id),/*#__PURE__*/React.createElement(\"td\",null,user.firstname,\" \",user.lastname),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"ul\",{className:\"text-left\"},/*#__PURE__*/React.createElement(\"li\",null,\"Phone \",user.phonenum),/*#__PURE__*/React.createElement(\"li\",null,\"Village \",user.villageName),/*#__PURE__*/React.createElement(\"li\",null,\"Sub-District \",user.subdistrictName),/*#__PURE__*/React.createElement(\"li\",null,\"District \",user.districtName),/*#__PURE__*/React.createElement(\"li\",null,\"Province \",user.provinceName))),/*#__PURE__*/React.createElement(\"td\",null,user.Regisby),/*#__PURE__*/React.createElement(\"td\",null,_this8.getDateTimeFormatted(user.regisTime)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",class:\"btn btn-warning m-2\",onClick:function onClick(){return _this8.call(user);}},\"Edit\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",class:\"btn btn-danger m-2\",onClick:function onClick(){return _this8.onDelete(user);}},\"Delete\")),/*#__PURE__*/React.createElement(\"div\",{className:\"box\"},/*#__PURE__*/React.createElement(Modal,{visible:_this8.state.visible,width:\"1200\",height:\"600\",effect:\"fadeInUp\",onClickAway:function onClickAway(){return _this8.closeModal();}},/*#__PURE__*/React.createElement(\"form\",{className:\"container\",id:\"form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"h3\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"id\"},\"ID: \",_this8.state.id,/*#__PURE__*/React.createElement(\"br\",null)))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Firstname:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",id:\"firstname\",onChange:_this8.handleChang,value:_this8.state.firstname}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Lastname:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",id:\"lastname\",onChange:_this8.handleChang,value:_this8.state.lastname})))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Phone:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",id:\"phonenum\",onChange:_this8.handleChang,value:_this8.state.phonenum})))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Village\"),/*#__PURE__*/React.createElement(\"select\",{className:\"form-control\",id:\"village\",onChange:_this8.handleChang},/*#__PURE__*/React.createElement(\"option\",{value:0}),_this8.state.list_village.map(function(item){return/*#__PURE__*/React.createElement(\"option\",{value:item.villageId,selected:item.villageId==_this8.state.village},item.villageName);})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Sub-District\"),/*#__PURE__*/React.createElement(\"select\",{className:\"form-control\",id:\"subdistrict\",onChange:_this8.handleChang},/*#__PURE__*/React.createElement(\"option\",{value:0}),_this8.state.list_subdistrict.map(function(item){return/*#__PURE__*/React.createElement(\"option\",{value:item.subdistrictId,selected:item.subdistrictId==_this8.state.subdistrict},item.subdistrictName);})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"District\"),/*#__PURE__*/React.createElement(\"select\",{className:\"form-control\",id:\"district\",onChange:_this8.handleChang},/*#__PURE__*/React.createElement(\"option\",{value:0}),_this8.state.list_district.map(function(item){return/*#__PURE__*/React.createElement(\"option\",{value:item.districtId,selected:item.districtId==_this8.state.district},item.districtName);})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Province\"),/*#__PURE__*/React.createElement(\"select\",{className:\"form-control\",id:\"province\",onChange:_this8.handleChang},/*#__PURE__*/React.createElement(\"option\",{value:0}),_this8.state.list_province.map(function(item){return/*#__PURE__*/React.createElement(\"option\",{value:item.provinceId,selected:item.provinceId==_this8.state.province},item.provinceName);}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"id\"},\"Create By: \",_this8.state.Regisby,/*#__PURE__*/React.createElement(\"br\",null))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"id\"},\"Update on: \",_this8.getDateTimeFormatted(_this8.state.regisTime),/*#__PURE__*/React.createElement(\"br\",null))),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:_this8.handleClicked},\"Save\")))));})))),/*#__PURE__*/React.createElement(\"br\",null));}}]);return Showdata;}(Component);export{Showdata as default};","map":{"version":3,"sources":["/home/oat/dbms-fbedit/react/src/showdata/Showdata.js"],"names":["React","Component","axios","Modal","ip","port","Showdata","_baseURL","getData","console","log","fetch","then","res","json","list","setState","onDelete","user","result","window","confirm","firstname","lastname","url","data","id","put","componentDidMount","call","openModal","phonenum","regisTime","Regisby","province","district","subdistrict","village","handleChang","e","target","value","getDistricts","state","list_subdistrict","list_village","document","getElementById","disabled","getSubDistricts","getVillage","getDateTimeFormatted","date","Date","resultDate","toLocaleDateString","year","month","day","resultTime","toLocaleTimeString","hour","minute","list_province","list_district","date_on","bind","handleClicked","setTimeout","get","getProvinces","provinceId","districtId","subdistrictId","visible","closeModal","length","map","villageName","subdistrictName","districtName","provinceName","item","villageId"],"mappings":"82BAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,CACA,MAAO,gBAAP,CACA;AACA,OAAQC,EAAR,CAAWC,IAAX,KAAsB,kBAAtB,C,GAEqBC,CAAAA,Q,oGACjB,mBAAc,0CACV,wBADU,MAwBdC,QAxBc,CAwBH,EAxBG,OA+BdC,OA/Bc,CA+BJ,UAAM,CACZC,OAAO,CAACC,GAAR,CAAY,mBAAZ,EACAC,KAAK,CAAC,OAAD,CAAL,CACKC,IADL,CACU,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EADb,EAEKF,IAFL,CAEU,SAAAG,IAAI,CAAI,CACVN,OAAO,CAACC,GAAR,CAAYK,IAAZ,EACA,MAAKC,QAAL,CAAc,CAAED,IAAI,CAAJA,IAAF,CAAd,EAEH,CANL,EAOAN,OAAO,CAACC,GAAR,CAAY,kBAAZ,EACH,CAzCa,OA2CdO,QA3Cc,CA2CL,SAACC,IAAD,CAAQ,CACb,GAAMC,CAAAA,MAAM,CAAGC,MAAM,CAACC,OAAP,wEAA6BH,IAAI,CAACI,SAAlC,aAA+CJ,IAAI,CAACK,QAApD,mEAAf,CACA,GAAIJ,MAAJ,CAAY,CACR,GAAIK,CAAAA,GAAG,WAAM,MAAKjB,QAAX,WAAP,CACA,GAAIkB,CAAAA,IAAI,CAAG,CACPC,EAAE,CAAER,IAAI,CAACQ,EADF,CAAX,CAGAxB,KAAK,CAACyB,GAAN,CAAUH,GAAV,CAAcC,IAAd,EACA,MAAKG,iBAAL,GACH,CACJ,CArDa,OAkGdC,IAlGc,CAkGT,SAACX,IAAD,CAAQ,CACT,MAAKY,SAAL,CAAeZ,IAAf,EACA,MAAKF,QAAL,CAAc,CACVU,EAAE,CAAER,IAAI,CAACQ,EADC,CAEVJ,SAAS,CAAEJ,IAAI,CAACI,SAFN,CAGVC,QAAQ,CAAEL,IAAI,CAACK,QAHL,CAIVQ,QAAQ,CAAEb,IAAI,CAACa,QAJL,CAKVC,SAAS,CAAEd,IAAI,CAACc,SALN,CAMVC,OAAO,CAAEf,IAAI,CAACe,OANJ,CAOVC,QAAQ,CAAEhB,IAAI,CAACgB,QAPL,CAQVC,QAAQ,CAAEjB,IAAI,CAACiB,QARL,CASVC,WAAW,CAAElB,IAAI,CAACkB,WATR,CAUVC,OAAO,CAAEnB,IAAI,CAACmB,OAVJ,CAAd,EAYH,CAhHa,OAiHdC,WAjHc,CAiHA,SAACC,CAAD,CAAO,CACjB,MAAKvB,QAAL,oBACKuB,CAAC,CAACC,MAAF,CAASd,EADd,CACmBa,CAAC,CAACC,MAAF,CAASC,KAD5B,GAIA,OAAOF,CAAC,CAACC,MAAF,CAASd,EAAhB,EACI,IAAK,UAAL,CACI,MAAKgB,YAAL,CAAkBH,CAAC,CAACC,MAAF,CAASC,KAA3B,EACA,MAAKE,KAAL,CAAWC,gBAAX,CAA8B,EAA9B,CACA,MAAKD,KAAL,CAAWE,YAAX,CAA0B,EAA1B,CACAC,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,QAApC,CAA+CT,CAAC,CAACC,MAAF,CAASC,KAAT,GAAmB,GAAnB,CAAyB,IAAzB,CAAgC,KAA/E,CACAK,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,QAAvC,CAAkD,IAAlD,CACAF,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCC,QAAnC,CAA8C,IAA9C,CACA,MACJ,IAAK,UAAL,CACI,MAAKC,eAAL,CAAqBV,CAAC,CAACC,MAAF,CAASC,KAA9B,EACA,MAAKE,KAAL,CAAWE,YAAX,CAA0B,EAA1B,CACAC,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,QAAvC,CAAkDT,CAAC,CAACC,MAAF,CAASC,KAAT,GAAmB,GAAnB,CAAyB,IAAzB,CAAgC,KAAlF,CACAK,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCC,QAAnC,CAA8C,IAA9C,CACA,MACJ,IAAK,aAAL,CACI,MAAKE,UAAL,CAAgBX,CAAC,CAACC,MAAF,CAASC,KAAzB,EACAK,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCC,QAAnC,CAA8CT,CAAC,CAACC,MAAF,CAASC,KAAT,GAAmB,GAAnB,CAAyB,IAAzB,CAAgC,KAA9E,CACA,MAlBR,CAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,CAnJa,OAqJdU,oBArJc,CAqJS,SAAC1B,IAAD,CAAU,CAC7B,GAAM2B,CAAAA,IAAI,CAAG,GAAIC,CAAAA,IAAJ,CAAS5B,IAAT,CAAb,CACA,GAAM6B,CAAAA,UAAU,CAAGF,IAAI,CAACG,kBAAL,CAAwB,OAAxB,CAAiC,CAChDC,IAAI,CAAE,SAD0C,CAEhDC,KAAK,CAAE,MAFyC,CAGhDC,GAAG,CAAE,SAH2C,CAAjC,CAAnB,CAKA,GAAMC,CAAAA,UAAU,CAAGP,IAAI,CAACQ,kBAAL,CAAwB,OAAxB,CAAiC,CAChDC,IAAI,CAAE,SAD0C,CAEhDC,MAAM,CAAE,SAFwC,CAAjC,CAAnB,CAIA,gBAAUR,UAAV,aAAwBK,UAAxB,EACH,CAjKa,CAEV,MAAKhB,KAAL,CAAY,CACR5B,IAAI,CAAC,EADG,CAERgD,aAAa,CAAE,EAFP,CAGRC,aAAa,CAAE,EAHP,CAIRpB,gBAAgB,CAAE,EAJV,CAKRC,YAAY,CAAE,EALN,CAMRnB,EAAE,CAAE,CANI,CAORJ,SAAS,CAAE,EAPH,CAQRC,QAAQ,CAAE,EARF,CASRU,OAAO,CAAE,EATD,CAURF,QAAQ,CAAE,EAVF,CAWRkC,OAAO,CAAE,EAXD,CAYR/B,QAAQ,CAAE,EAZF,CAaRC,QAAQ,CAAE,EAbF,CAcRC,WAAW,CAAE,EAdL,CAeRC,OAAO,CAAE,EAfD,CAAZ,CAiBA,MAAKC,WAAL,CAAmB,MAAKA,WAAL,CAAiB4B,IAAjB,+BAAnB,CACA,MAAKC,aAAL,CAAqB,MAAKA,aAAL,CAAmBD,IAAnB,+BAArB,CACA;AArBU,aAsBb,C,kFAImB,iBAChBE,UAAU,CAAE,UAAM,CACd,MAAI,CAAC5D,OAAL,GACH,CAFS,CAEP,CAFO,CAAV,CAGH,C,mDAyBc,iBACXN,KAAK,CAACmE,GAAN,CAAU,YAAV,EACCzD,IADD,CACM,SAAAC,GAAG,CAAI,CACT,MAAI,CAACG,QAAL,CAAc,iBAAO,CAAC+C,aAAa,CAAElD,GAAG,CAACY,IAApB,CAAP,EAAd,EACH,CAHD,EAIH,C,kDAEYgB,K,CAAO,iBAChBvC,KAAK,CAACmE,GAAN,iCAAmC5B,KAAnC,GACC7B,IADD,CACM,SAAAC,GAAG,CAAI,CACT,MAAI,CAACG,QAAL,CAAc,iBAAO,CAACgD,aAAa,CAAEnD,GAAG,CAACY,IAApB,CAAP,EAAd,EACH,CAHD,EAIH,C,wDAEegB,K,CAAO,iBACnBvC,KAAK,CAACmE,GAAN,oCAAsC5B,KAAtC,GACC7B,IADD,CACM,SAAAC,GAAG,CAAI,CACT,MAAI,CAACG,QAAL,CAAc,iBAAO,CAAC4B,gBAAgB,CAAE/B,GAAG,CAACY,IAAvB,CAAP,EAAd,EACH,CAHD,EAIH,C,8CAEUgB,K,CAAO,iBACdvC,KAAK,CAACmE,GAAN,mCAAqC5B,KAArC,GACC7B,IADD,CACM,SAAAC,GAAG,CAAI,CACT,MAAI,CAACG,QAAL,CAAc,iBAAO,CAAC6B,YAAY,CAAEhC,GAAG,CAACY,IAAnB,CAAP,EAAd,EACH,CAHD,EAIH,C,4CAESP,I,CAAM,CACZ,KAAKoD,YAAL,GACA,KAAK5B,YAAL,CAAkBxB,IAAI,CAACqD,UAAvB,EACA,KAAKtB,eAAL,CAAqB/B,IAAI,CAACsD,UAA1B,EACA,KAAKtB,UAAL,CAAgBhC,IAAI,CAACuD,aAArB,EAEA,KAAKzD,QAAL,CAAc,CACV0D,OAAO,CAAG,IADA,CAAd,EAGH,C,+CACY,CACT,KAAK1D,QAAL,CAAc,CACV0D,OAAO,CAAG,KADA,CAAd,EAGH,C,qDAkEc,iBACX,GAAIlD,CAAAA,GAAG,WAAM,KAAKjB,QAAX,SAAP,CACA,GAAIkB,CAAAA,IAAI,CAAG,CACPC,EAAE,CAAE,KAAKiB,KAAL,CAAWjB,EADR,CAEPJ,SAAS,CAAE,KAAKqB,KAAL,CAAWrB,SAFf,CAGPC,QAAQ,CAAE,KAAKoB,KAAL,CAAWpB,QAHd,CAIPQ,QAAQ,CAAE,KAAKY,KAAL,CAAWZ,QAJd,CAKPG,QAAQ,CAAE,KAAKS,KAAL,CAAWT,QALd,CAMPC,QAAQ,CAAE,KAAKQ,KAAL,CAAWR,QANd,CAOPC,WAAW,CAAE,KAAKO,KAAL,CAAWP,WAPjB,CAQPC,OAAO,CAAE,KAAKM,KAAL,CAAWN,OARb,CAAX,CAUAnC,KAAK,CAACyB,GAAN,CAAUH,GAAV,CAAcC,IAAd,EACA,KAAKT,QAAL,CAAc,CACVU,EAAE,CAAE,CADM,CAEVJ,SAAS,CAAE,EAFD,CAGVC,QAAQ,CAAE,EAHA,CAIVQ,QAAQ,CAAE,EAJA,CAKVC,SAAS,CAAE,EALD,CAMVE,QAAQ,CAAE,EANA,CAOVC,QAAQ,CAAE,EAPA,CAQVC,WAAW,CAAE,EARH,CASVC,OAAO,CAAE,EATC,CAAd,EAWP,KAAKsC,UAAL,GACOP,UAAU,CAAC,UAAI,CAAC,MAAI,CAACxC,iBAAL,GAAyB,CAA/B,CAAgC,CAAhC,CAAV,CACH,C,uCACQ,oBACAb,CAAAA,IADA,CACQ,KAAK4B,KADb,CACA5B,IADA,CAGL,mBACI,2BAAK,SAAS,CAAC,KAAf,eACI,0BAAI,SAAS,CAAC,MAAd,oCAAuC,2GAAmB,KAAK4B,KAAL,CAAW5B,IAAX,CAAgB6D,MAAnC,yCAAvC,CADJ,cAEI,8BAFJ,cAGI,2BAAK,SAAS,CAAC,wCAAf,eACI,6BAAO,SAAS,CAAC,mBAAjB,eACI,8CACI,2CACI,mCADJ,cAEI,qCAFJ,cAGI,uCAHJ,cAII,0CAJJ,cAKI,0CALJ,cAMI,4CANJ,CADJ,CADJ,cAWI,iCACS7D,IAAI,CAAC8D,GAAL,CAAS,SAAC3D,IAAD,CAAS,CACf,mBACI,2CACI,8BAAKA,IAAI,CAACQ,EAAV,CADJ,cAEI,8BAAKR,IAAI,CAACI,SAAV,KAAsBJ,IAAI,CAACK,QAA3B,CAFJ,cAGI,2CACI,0BAAI,SAAS,CAAC,WAAd,eACI,uCAAWL,IAAI,CAACa,QAAhB,CADJ,cAEI,yCAAab,IAAI,CAAC4D,WAAlB,CAFJ,cAGI,8CAAkB5D,IAAI,CAAC6D,eAAvB,CAHJ,cAII,0CAAc7D,IAAI,CAAC8D,YAAnB,CAJJ,cAKI,0CAAc9D,IAAI,CAAC+D,YAAnB,CALJ,CADJ,CAHJ,cAYI,8BAAK/D,IAAI,CAACe,OAAV,CAZJ,cAaI,8BAAK,MAAI,CAACkB,oBAAL,CAA0BjC,IAAI,CAACc,SAA/B,CAAL,CAbJ,cAcI,2CACI,8BAAQ,IAAI,CAAC,QAAb,CAAsB,KAAK,CAAC,qBAA5B,CAAkD,OAAO,CAAE,yBAAI,CAAA,MAAI,CAACH,IAAL,CAAUX,IAAV,CAAJ,EAA3D,SADJ,cAEI,8BAAQ,IAAI,CAAC,QAAb,CAAsB,KAAK,CAAC,oBAA5B,CAAkD,OAAO,CAAE,yBAAI,CAAA,MAAI,CAACD,QAAL,CAAcC,IAAd,CAAJ,EAA3D,WAFJ,CAdJ,cAkBI,2BAAK,SAAS,CAAC,KAAf,eACI,oBAAC,KAAD,EAAO,OAAO,CAAE,MAAI,CAACyB,KAAL,CAAW+B,OAA3B,CACI,KAAK,CAAC,MADV,CAEI,MAAM,CAAC,KAFX,CAGI,MAAM,CAAC,UAHX,CAII,WAAW,CAAE,6BAAM,CAAA,MAAI,CAACC,UAAL,EAAN,EAJjB,eAMI,4BAAM,SAAS,CAAC,WAAhB,CAA4B,EAAE,CAAC,MAA/B,eACI,2BAAK,SAAS,CAAC,YAAf,eACI,2CAAI,6BAAO,OAAO,CAAC,IAAf,SAAyB,MAAI,CAAChC,KAAL,CAAWjB,EAApC,cAAuC,8BAAvC,CAAJ,CADJ,CADJ,cAII,2BAAK,SAAS,CAAC,KAAf,eACI,2BAAK,SAAS,CAAC,QAAf,eACI,2BAAK,SAAS,CAAC,YAAf,eACI,8CADJ,cAEI,6BAAO,IAAI,CAAC,MAAZ,CAAmB,SAAS,CAAC,cAA7B,CAA4C,EAAE,CAAC,WAA/C,CAA2D,QAAQ,CAAE,MAAI,CAACY,WAA1E,CAAuF,KAAK,CAAE,MAAI,CAACK,KAAL,CAAWrB,SAAzG,EAFJ,CADJ,CADJ,cAOI,2BAAK,SAAS,CAAC,QAAf,eACI,2BAAK,SAAS,CAAC,YAAf,eACI,6CADJ,cAEI,6BAAO,IAAI,CAAC,MAAZ,CAAmB,SAAS,CAAC,cAA7B,CAA4C,EAAE,CAAC,UAA/C,CAA0D,QAAQ,CAAE,MAAI,CAACgB,WAAzE,CAAsF,KAAK,CAAE,MAAI,CAACK,KAAL,CAAWpB,QAAxG,EAFJ,CADJ,CAPJ,CAJJ,cAkBI,2BAAK,SAAS,CAAC,KAAf,eACI,2BAAK,SAAS,CAAC,QAAf,eACI,2BAAK,SAAS,CAAC,YAAf,eACI,0CADJ,cAEI,6BAAO,IAAI,CAAC,MAAZ,CAAmB,SAAS,CAAC,cAA7B,CAA4C,EAAE,CAAC,UAA/C,CAA0D,QAAQ,CAAE,MAAI,CAACe,WAAzE,CAAsF,KAAK,CAAE,MAAI,CAACK,KAAL,CAAWZ,QAAxG,EAFJ,CADJ,CADJ,CAlBJ,cA0BI,2BAAK,SAAS,CAAC,KAAf,eACI,2BAAK,SAAS,CAAC,QAAf,eACI,2BAAK,SAAS,CAAC,YAAf,eACI,2CADJ,cAEI,8BAAQ,SAAS,CAAC,cAAlB,CAAiC,EAAE,CAAC,SAApC,CAA8C,QAAQ,CAAE,MAAI,CAACO,WAA7D,eACI,8BAAQ,KAAK,CAAE,CAAf,EADJ,CAGQ,MAAI,CAACK,KAAL,CAAWE,YAAX,CAAwBgC,GAAxB,CAA4B,SAACK,IAAD,CAAU,CAClC,mBACI,8BAAQ,KAAK,CAAEA,IAAI,CAACC,SAApB,CAA+B,QAAQ,CAAED,IAAI,CAACC,SAAL,EAAkB,MAAI,CAACxC,KAAL,CAAWN,OAAtE,EAAgF6C,IAAI,CAACJ,WAArF,CADJ,CAGH,CAJD,CAHR,CAFJ,CADJ,CADJ,cAgBI,2BAAK,SAAS,CAAC,QAAf,eACI,2BAAK,SAAS,CAAC,YAAf,eACI,gDADJ,cAEI,8BAAQ,SAAS,CAAC,cAAlB,CAAiC,EAAE,CAAC,aAApC,CAAkD,QAAQ,CAAE,MAAI,CAACxC,WAAjE,eACI,8BAAQ,KAAK,CAAE,CAAf,EADJ,CAGQ,MAAI,CAACK,KAAL,CAAWC,gBAAX,CAA4BiC,GAA5B,CAAgC,SAACK,IAAD,CAAU,CACtC,mBACI,8BAAQ,KAAK,CAAEA,IAAI,CAACT,aAApB,CAAmC,QAAQ,CAAES,IAAI,CAACT,aAAL,EAAsB,MAAI,CAAC9B,KAAL,CAAWP,WAA9E,EAA4F8C,IAAI,CAACH,eAAjG,CADJ,CAGH,CAJD,CAHR,CAFJ,CADJ,CAhBJ,cA+BI,2BAAK,SAAS,CAAC,QAAf,eACI,2BAAK,SAAS,CAAC,YAAf,eACI,4CADJ,cAEI,8BAAQ,SAAS,CAAC,cAAlB,CAAiC,EAAE,CAAC,UAApC,CAA+C,QAAQ,CAAE,MAAI,CAACzC,WAA9D,eACI,8BAAQ,KAAK,CAAE,CAAf,EADJ,CAGQ,MAAI,CAACK,KAAL,CAAWqB,aAAX,CAAyBa,GAAzB,CAA6B,SAACK,IAAD,CAAU,CACnC,mBACI,8BAAQ,KAAK,CAAEA,IAAI,CAACV,UAApB,CAAgC,QAAQ,CAAEU,IAAI,CAACV,UAAL,EAAmB,MAAI,CAAC7B,KAAL,CAAWR,QAAxE,EAAmF+C,IAAI,CAACF,YAAxF,CADJ,CAGH,CAJD,CAHR,CAFJ,CADJ,CA/BJ,cA8CI,2BAAK,SAAS,CAAC,QAAf,eACI,2BAAK,SAAS,CAAC,YAAf,eACI,4CADJ,cAEI,8BAAQ,SAAS,CAAC,cAAlB,CAAiC,EAAE,CAAC,UAApC,CAA+C,QAAQ,CAAE,MAAI,CAAC1C,WAA9D,eACI,8BAAQ,KAAK,CAAE,CAAf,EADJ,CAGQ,MAAI,CAACK,KAAL,CAAWoB,aAAX,CAAyBc,GAAzB,CAA6B,SAACK,IAAD,CAAU,CACnC,mBACI,8BAAQ,KAAK,CAAEA,IAAI,CAACX,UAApB,CAAgC,QAAQ,CAAEW,IAAI,CAACX,UAAL,EAAmB,MAAI,CAAC5B,KAAL,CAAWT,QAAxE,EAAmFgD,IAAI,CAACD,YAAxF,CADJ,CAGH,CAJD,CAHR,CAFJ,CADJ,CA9CJ,CA1BJ,cAwFI,2BAAK,SAAS,CAAC,YAAf,eACI,6BAAO,OAAO,CAAC,IAAf,gBAAgC,MAAI,CAACtC,KAAL,CAAWV,OAA3C,cAAmD,8BAAnD,CADJ,CAxFJ,cA2FI,2BAAK,SAAS,CAAC,YAAf,eACI,6BAAO,OAAO,CAAC,IAAf,gBAAgC,MAAI,CAACkB,oBAAL,CAA0B,MAAI,CAACR,KAAL,CAAWX,SAArC,CAAhC,cAAgF,8BAAhF,CADJ,CA3FJ,cA8FI,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,iBAAhC,CAAkD,OAAO,CAAE,MAAI,CAACmC,aAAhE,SA9FJ,CANJ,CADJ,CAlBJ,CADJ,CA6HE,CA9HL,CADT,CAXJ,CADJ,CAHJ,cAiJU,8BAjJV,CADJ,CAqJH,C,sBAvViClE,S,SAAjBK,Q","sourcesContent":["import React, {Component} from \"react\";\nimport axios from \"axios\";\nimport Modal from 'react-awesome-modal';\nimport './Showdata.css';\n//import '../../server/app';\nimport {ip,port} from \"../setIP/setting\";\n\nexport default class Showdata extends Component{\n    constructor() {\n        super();\n        this.state ={\n            list:[],\n            list_province: [],\n            list_district: [],\n            list_subdistrict: [],\n            list_village: [],\n            id: 0,\n            firstname: \"\",\n            lastname: \"\",\n            Regisby: \"\",\n            phonenum: \"\",\n            date_on: \"\",\n            province: \"\",\n            district: \"\",\n            subdistrict: \"\",\n            village: \"\",\n        }\n        this.handleChang = this.handleChang.bind(this);\n        this.handleClicked = this.handleClicked.bind(this);\n        //console.log(\"hello show data\");\n    }\n\n    _baseURL = '';\n\n    componentDidMount() {\n        setTimeout( () => {\n            this.getData();\n        }, 1);\n    }\n    getData = () => {\n        console.log(\"before fetch data\");\n        fetch('/data')\n            .then(res => res.json())\n            .then(list => {\n                console.log(list)\n                this.setState({ list });\n\n            })\n        console.log(\"after fetch data\");\n    }\n\n    onDelete=(user)=>{\n        const result = window.confirm(`จะลบข้อมูล ${user.firstname} ${user.lastname} ใช่หรือไม่?`);\n        if (result) {\n            let url = `${this._baseURL}/delete`;\n            let data = {\n                id: user.id\n            };\n            axios.put(url,data);\n            this.componentDidMount();\n        }\n    }\n\n    getProvinces() {\n        axios.get('/provinces')\n        .then(res => {\n            this.setState(() => ({list_province: res.data}));\n        });\n    }\n\n    getDistricts(value) {\n        axios.get(`/districts?provinceId=${value}`)\n        .then(res => {\n            this.setState(() => ({list_district: res.data}));\n        });\n    }\n\n    getSubDistricts(value) {\n        axios.get(`/subdistricts?districtId=${value}`)\n        .then(res => {\n            this.setState(() => ({list_subdistrict: res.data}));\n        });\n    }\n\n    getVillage(value) {\n        axios.get(`/villages?subdistrictId=${value}`)\n        .then(res => {\n            this.setState(() => ({list_village: res.data}));\n        });\n    }\n\n    openModal(user) {\n        this.getProvinces();\n        this.getDistricts(user.provinceId);\n        this.getSubDistricts(user.districtId);\n        this.getVillage(user.subdistrictId);\n\n        this.setState({\n            visible : true\n        });\n    }\n    closeModal() {\n        this.setState({\n            visible : false\n        });\n    }\n    call=(user)=>{\n        this.openModal(user);\n        this.setState({\n            id: user.id,\n            firstname: user.firstname,\n            lastname: user.lastname,\n            phonenum: user.phonenum,\n            regisTime: user.regisTime,\n            Regisby: user.Regisby,\n            province: user.province,\n            district: user.district,\n            subdistrict: user.subdistrict,\n            village: user.village,\n        })\n    }\n    handleChang = (e) => {\n        this.setState({\n            [e.target.id]: e.target.value\n        });\n\n        switch(e.target.id) {\n            case 'province':\n                this.getDistricts(e.target.value);\n                this.state.list_subdistrict = [];\n                this.state.list_village = [];\n                document.getElementById('district').disabled = e.target.value === \"0\" ? true : false;\n                document.getElementById('subdistrict').disabled = true;\n                document.getElementById('village').disabled = true;\n                break;\n            case 'district':\n                this.getSubDistricts(e.target.value);\n                this.state.list_village = [];\n                document.getElementById('subdistrict').disabled = e.target.value === \"0\" ? true : false;\n                document.getElementById('village').disabled = true;\n                break;\n            case 'subdistrict':\n                this.getVillage(e.target.value);\n                document.getElementById('village').disabled = e.target.value === \"0\" ? true : false;\n                break;\n        }\n        // let url = `https://localhost:3000/data`;\n        // let data = {\n        //     user_id: this.state.user_id,\n        //     user_firstname: this.state.user_firstname,\n        //     user_lastname: this.state.user_lastname,\n        //     user_email: this.state.user_email,\n        //     user_phone: this.state.user_phone\n        // }\n        // axios.put(url,data)\n    }\n\n    getDateTimeFormatted = (data) => {\n        const date = new Date(data);\n        const resultDate = date.toLocaleDateString('th-TH', {\n            year: 'numeric',\n            month: 'long',\n            day: 'numeric',\n        });\n        const resultTime = date.toLocaleTimeString('th-TH', {\n            hour: '2-digit',\n            minute: '2-digit',\n        });\n        return `${resultDate} ${resultTime}`;\n    }\n\n    handleClicked(){\n        let url = `${this._baseURL}/data`;\n        let data = {\n            id: this.state.id,\n            firstname: this.state.firstname,\n            lastname: this.state.lastname,\n            phonenum: this.state.phonenum,\n            province: this.state.province,\n            district: this.state.district,\n            subdistrict: this.state.subdistrict,\n            village: this.state.village,\n        }\n        axios.put(url,data)\n        this.setState({\n            id: 0,\n            firstname: \"\",\n            lastname: \"\",\n            phonenum: \"\",\n            regisTime: \"\",\n            province: \"\",\n            district: \"\",\n            subdistrict: \"\",\n            village: \"\",\n        });\n\tthis.closeModal();\n        setTimeout(()=>{this.componentDidMount()},1)\n    }\n    render() {\n        let {list} = this.state;\n\n        return (\n            <div className=\"App\">\n                <h2 className=\"my-4\">Users Information <div>จำนวนทั้งหมด {this.state.list.length} รายการ</div></h2>\n                <hr/>\n                <div className=\"container p-3 my-3 bg-light text-black\">\n                    <table className=\"table table-light\">\n                        <thead>\n                            <tr>\n                                <th>ID</th>\n                                <th>Name</th>\n                                <th>Detail</th>\n                                <th>Create By</th>\n                                <th>Update on</th>\n                                <th>Manage Menu</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                                {list.map((user) =>{\n                                    return(\n                                        <tr>\n                                            <td>{user.id}</td>\n                                            <td>{user.firstname} {user.lastname}</td>\n                                            <td>\n                                                <ul className=\"text-left\">\n                                                    <li>Phone {user.phonenum}</li>\n                                                    <li>Village {user.villageName}</li>\n                                                    <li>Sub-District {user.subdistrictName}</li>\n                                                    <li>District {user.districtName}</li>\n                                                    <li>Province {user.provinceName}</li>\n                                                </ul>\n                                            </td>\n                                            <td>{user.Regisby}</td>\n                                            <td>{this.getDateTimeFormatted(user.regisTime)}</td>\n                                            <td>\n                                                <button type=\"button\" class=\"btn btn-warning m-2\" onClick={()=>this.call(user)}>Edit</button>\n                                                <button type=\"button\" class=\"btn btn-danger m-2\"  onClick={()=>this.onDelete(user)}>Delete</button>\n                                            </td>\n                                            <div className=\"box\">\n                                                <Modal visible={this.state.visible}\n                                                    width=\"1200\"\n                                                    height=\"600\"\n                                                    effect=\"fadeInUp\"\n                                                    onClickAway={() => this.closeModal()}\n                                                >\n                                                    <form className=\"container\" id='form'>\n                                                        <div className=\"form-group\">\n                                                            <h3><label htmlFor=\"id\">ID: {this.state.id}<br/></label></h3>\n                                                        </div>\n                                                        <div className=\"row\">\n                                                            <div className=\"col-md\">\n                                                                <div className=\"form-group\">\n                                                                    <label>Firstname:</label>\n                                                                    <input type=\"text\" className=\"form-control\" id=\"firstname\" onChange={this.handleChang} value={this.state.firstname}/>\n                                                                </div>\n                                                            </div>\n                                                            <div className=\"col-md\">\n                                                                <div className=\"form-group\">\n                                                                    <label>Lastname:</label>\n                                                                    <input type=\"text\" className=\"form-control\" id=\"lastname\" onChange={this.handleChang} value={this.state.lastname}/>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                        <div className=\"row\">\n                                                            <div className=\"col-md\">\n                                                                <div className=\"form-group\">\n                                                                    <label>Phone:</label>\n                                                                    <input type=\"text\" className=\"form-control\" id=\"phonenum\" onChange={this.handleChang} value={this.state.phonenum}/>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                        <div className=\"row\">\n                                                            <div className=\"col-md\">\n                                                                <div className=\"form-group\">\n                                                                    <label>Village</label>\n                                                                    <select className=\"form-control\" id=\"village\" onChange={this.handleChang} >\n                                                                        <option value={0}></option>\n                                                                        {\n                                                                            this.state.list_village.map((item) => {\n                                                                                return(\n                                                                                    <option value={item.villageId} selected={item.villageId == this.state.village}>{item.villageName}</option>\n                                                                                );\n                                                                            })\n                                                                        }\n                                                                    </select>\n                                                                </div>\n                                                            </div>\n                                                            <div className=\"col-md\">\n                                                                <div className=\"form-group\">\n                                                                    <label>Sub-District</label>\n                                                                    <select className=\"form-control\" id=\"subdistrict\" onChange={this.handleChang} >\n                                                                        <option value={0}></option>\n                                                                        {\n                                                                            this.state.list_subdistrict.map((item) => {\n                                                                                return(\n                                                                                    <option value={item.subdistrictId} selected={item.subdistrictId == this.state.subdistrict}>{item.subdistrictName}</option>\n                                                                                );\n                                                                            })\n                                                                        }\n                                                                    </select>\n                                                                </div>\n                                                            </div>\n                                                            <div className=\"col-md\">\n                                                                <div className=\"form-group\">\n                                                                    <label>District</label>\n                                                                    <select className=\"form-control\" id=\"district\" onChange={this.handleChang} >\n                                                                        <option value={0}></option>\n                                                                        {\n                                                                            this.state.list_district.map((item) => {\n                                                                                return(\n                                                                                    <option value={item.districtId} selected={item.districtId == this.state.district}>{item.districtName}</option>\n                                                                                );\n                                                                            })\n                                                                        }\n                                                                    </select>\n                                                                </div>\n                                                            </div>\n                                                            <div className=\"col-md\">\n                                                                <div className=\"form-group\">\n                                                                    <label>Province</label>\n                                                                    <select className=\"form-control\" id=\"province\" onChange={this.handleChang}>\n                                                                        <option value={0}></option>\n                                                                        {\n                                                                            this.state.list_province.map((item) => {\n                                                                                return(\n                                                                                    <option value={item.provinceId} selected={item.provinceId == this.state.province}>{item.provinceName}</option>\n                                                                                );\n                                                                            })\n                                                                        }\n                                                                    </select>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                        <div className=\"form-group\">\n                                                            <label htmlFor=\"id\">Create By: {this.state.Regisby}<br/></label>\n                                                        </div>\n                                                        <div className=\"form-group\">\n                                                            <label htmlFor=\"id\">Update on: {this.getDateTimeFormatted(this.state.regisTime)}<br/></label>\n                                                        </div>\n                                                        <button type=\"button\" className=\"btn btn-primary\" onClick={this.handleClicked}>Save</button>\n                                                    </form>\n                                                </Modal>\n                                            </div>\n                                        </tr>\n                                    )})}\n                        </tbody>\n                    </table>\n                </div><br/>\n            </div>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}